<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-Learning Bimbingan Perkawinan KUA Pujon</title>
  <style>
    body {font-family: 'Segoe UI', Tahoma, sans-serif; background:#f4f6f9; margin:0;}
    header {background:#2E7D32; color:#fff; padding:20px; text-align:center;}
    h1 {margin:0; font-size:1.8em;}
    .subtitle {margin-top:5px; font-size:1.1em; opacity:0.9;}
    .container {max-width:1200px; margin:20px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);} 
    .grid {display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px;}
    .card {background:#fafafa; padding:15px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); transition:transform 0.2s;}
    .card:hover {transform:translateY(-5px);} 
    .card h3 {margin-top:0;}
    .card button {margin-top:10px; padding:8px 14px; background:#2E7D32; border:none; color:#fff; border-radius:8px; cursor:pointer;}
    #pdfViewer {width:100%; height:600px; border:none; margin-top:20px; display:none;}
    /* Admin */
    #adminPanel {display:none; margin-top:20px;}
    #loginPanel {text-align:center; margin-top:20px;}
    #loginPanel input[type=password]{padding:8px;width:200px;border-radius:6px;border:1px solid #ccc;}
    #loginPanel button{padding:8px 14px;background:#2E7D32;border:none;color:#fff;border-radius:6px;cursor:pointer;}
    footer {background:#2E7D32; color:#fff; text-align:center; padding:15px; margin-top:40px;}
  </style>
</head>
<body>
  <header>
    <h1>E-Learning Bimbingan Perkawinan</h1>
    <p class="subtitle">KUA Kecamatan Pujon - Kabupaten Malang</p>
  </header>

  <div class="container">
    <h2>Daftar Materi</h2>
    <div id="materiList" class="grid"></div>

    <iframe id="pdfViewer"></iframe>

    <!-- Panel Login untuk Admin -->
    <div id="loginPanel">
      <p>Login Admin KUA Pujon untuk mengelola materi</p>
      <input type="password" id="adminPass" placeholder="Masukkan Password Admin" />
      <button onclick="loginAdmin()">Login</button>
    </div>

    <!-- Panel Admin -->
    <div id="adminPanel">
      <h3>Kelola Materi</h3>
      <input type="text" id="judul" placeholder="Judul Materi" />
      <input type="file" id="pdfFile" accept="application/pdf" />
      <button onclick="tambahMateri()">Tambah Materi</button>
    </div>
  </div>

  <footer>
    &copy; 2025 KUA Kecamatan Pujon - Kabupaten Malang. Semua Hak Dilindungi.
  </footer>

  <script>
    const materiList = document.getElementById('materiList');
    const pdfViewer = document.getElementById('pdfViewer');
    const adminPanel = document.getElementById('adminPanel');
    let isAdmin = false;

    // Materi awal dengan file Panduan Keluarga Sakinah yang Anda unggah
    let defaultMateri = [
      {
        judul: 'Panduan Keluarga Sakinah',
        pdf: 'modul-bimbingan-perkawinan.pdf' // Pastikan file PDF ini diletakkan di folder yang sama dengan file HTML
      },
      {
        judul: 'Hak dan Kewajiban Suami Istri',
        pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf'
      },
      {
        judul: 'Manajemen Konflik dalam Rumah Tangga',
        pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf'
      },
      {
        judul: 'Perencanaan Keuangan Keluarga',
        pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf'
      }
    ];

    let materi = JSON.parse(localStorage.getItem('materiBimwin')||'null');
    if(!materi){
      materi = defaultMateri;
      localStorage.setItem('materiBimwin', JSON.stringify(materi));
    }

    function renderMateri(){
      materiList.innerHTML='';
      materi.forEach((m,i)=>{
        const card = document.createElement('div');
        card.className='card';
        card.innerHTML = `<h3>${m.judul}</h3><button onclick="lihatPDF(${i})">Buka Materi</button>` +
                         (isAdmin ? `<button style="background:#e74c3c;margin-left:10px" onclick="hapusMateri(${i})">Hapus</button>` : '');
        materiList.appendChild(card);
      });
    }

    function lihatPDF(i){
      pdfViewer.src = materi[i].pdf;
      pdfViewer.style.display='block';
      window.scrollTo({ top: pdfViewer.offsetTop, behavior: 'smooth' });
    }

    function tambahMateri(){
      const judul = document.getElementById('judul').value.trim();
      const file = document.getElementById('pdfFile').files[0];
      if(!judul || !file){alert('Judul dan PDF wajib diisi');return;}
      const reader = new FileReader();
      reader.onload = function(){
        materi.push({judul:judul,pdf:reader.result});
        localStorage.setItem('materiBimwin',JSON.stringify(materi));
        renderMateri();
      };
      reader.readAsDataURL(file);
    }

    function hapusMateri(i){
      if(confirm('Hapus materi ini?')){
        materi.splice(i,1);
        localStorage.setItem('materiBimwin',JSON.stringify(materi));
        renderMateri();
      }
    }

    function loginAdmin(){
      const pass = document.getElementById('adminPass').value;
      if(pass==='adminbimwin2025'){
        isAdmin = true;
        adminPanel.style.display='block';
        document.getElementById('loginPanel').style.display='none';
        renderMateri();
      } else {
        alert('Password salah!');
      }
    }

    renderMateri();
  </script>
</body>
</html>
